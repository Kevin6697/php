{% extends "adminHeader.html" %}
{% block title %}Edit Product{% endblock %}
{% block body %}
  <div id="mainContainer" >   
      <form action="{{session.base_url}}/public/admin/products/edit" method="post" enctype="multipart/form-data">
        <h2>Edit Product</h2>
    <div id="basicForm">   
        <div class="input-container">
            <input class="input-field" type="hidden"  name="pid" value="{{product.productId}}">
           <input class="input-field" type="text" placeholder="Name" name="pname" value="{{product.productName}}" required>
        </div>
        <div class="input-container">
            <input class="input-field" type="number" min=1  placeholder="Stock Keeping Unit" name="psku" value="{{product.productSKU}}" required>
          </div>
          <div class="input-container">
            <input class="input-field" type="file" name="pimg">
          </div>
          <div class="input-container">
            <textarea class="input-field" rows="6" name ='pdesc' placeholder="Description">{{product.productDescription}}</textarea>
          </div>
          <div class="input-container">
            <textarea class="input-field" rows="6" maxlength="250" name ='psdesc' placeholder=" Short Description">{{product.productShortDescription}}</textarea>
          </div>
          <div class="input-container">
            <input class="input-field" type="number" min=10 max=1000000  placeholder="Price" name="pprice" value="{{product.productPrice}}" required>
          </div>
          <div class="input-container">
            <input class="input-field" type="number" value="{{product.productStock}}" min=1  placeholder="Stock" name="pstock" required>
          </div>
          <div class="input-container">
            <select class="input-field" name="pstatus">
                {% if product.productStatus == 1 %}
                <option value="1" selected>Available</option>
                <option value="0">Unavailable</option>
                {% endif %}
                {% if product.productStatus == 0 %}
                <option value="1">Available</option>
                <option value="0" selected>Unavailable</option>
                {% endif %}
               </select>
          </div>
          <input type="button" name="next" value="Next" id="next" class="btn" onclick="nextForm();">
    </div>      
    <div id="categoryForm">      
        <h2>Select Category</h2>
        <div class="input-container">
            {% set productCategory = product.Category |split(',') %}
            {% if categories != null %}
                {% for cat in categories %}
                    {%  set select = (cat.categoryId in productCategory) ? 'checked': '' %}  
                    <input type='checkbox' name='cat[]' {{select}} value={{cat.categoryId}}>{{cat.categoryName}}
                {% endfor %}  
            {% endif %}
         </div>
        <input type="button" name="prev" value="Prev" id="prev" onclick="prevForm();" class="btn">
        <div style="margin-top: 5%;">
         <button type="submit" class="btn">Edit</button>
        </div> 
    </div>     
      </form>
    </div>   
    {{session.errorMessage}}
<script>
    document.getElementById("categoryForm").style.display = "none";
    function nextForm(){
        document.getElementById("categoryForm").style.display = "block";
        document.getElementById("basicForm").style.display = "none";
        
    }
    function prevForm(){
        document.getElementById("categoryForm").style.display = "none";
        document.getElementById("basicForm").style.display = "block";
        
    }
</script>
{% endblock %}
